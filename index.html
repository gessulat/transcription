<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Local STT (OpenAI Realtime, toggle-to-talk)</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="api-key">
      <button
        id="key-toggle"
        class="icon-button api-key__toggle api-key__toggle--missing"
        type="button"
        aria-label="Show API key settings"
        aria-expanded="false"
        aria-controls="key-panel"
        title="Show API key settings"
      >
        <i class="fa-solid fa-key" aria-hidden="true"></i>
      </button>
      <div id="key-panel" class="api-key__panel" hidden>
        <input id="key" type="password" placeholder="Paste your OpenAI API key (sk-...)" autocomplete="off" />
        <button id="show" class="icon-button" type="button" aria-label="Show API key" aria-pressed="false" title="Show API key">
          <i class="fa-solid fa-eye-slash" aria-hidden="true"></i>
        </button>
        <button
          id="clear"
          class="icon-button"
          type="button"
          aria-label="Clear API key"
          title="Clear API key"
        >
          <i class="fa-solid fa-trash" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </header>

  <div class="controls">
    <button id="toggle" class="icon-button" type="button" disabled aria-label="Connect to start" aria-pressed="false" title="Connect to start">
      <i class="fa-solid fa-microphone" aria-hidden="true"></i>
    </button>
    <small id="status">Not connected.</small>
  </div>

  <label class="debug-toggle">
    <input type="checkbox" id="debug" /> Show debug events
  </label>
  <pre id="out"></pre>
  <pre id="log"></pre>

  <p><small>
    If you still see no text, enable “Show debug events” — you should see <code>conversation.item.input_audio_transcription.delta</code> events streaming in. If neither appears, your account/model may require a different transcription model name; try <code>gpt-4o-transcribe</code> instead of <code>gpt-4o-mini-transcribe</code>. The Realtime docs note input transcription is disabled by default and must be enabled in a response/session config. :contentReference[oaicite:1]{index=1}
  </small></p>

  <script src="app.js" defer></script>
</body>
</html>
